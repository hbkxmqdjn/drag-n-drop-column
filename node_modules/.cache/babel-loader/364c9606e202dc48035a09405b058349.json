{"ast":null,"code":"var _jsxFileName = \"/Users/dingjunning/Documents/GitHub/drag-n-drop-column/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport { Button, ListGroup, ListGroupItem } from 'react-bootstrap';\nvar placeholder = document.createElement(\"li\");\nplaceholder.className = \"placeholder\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      available: [{\n        id: 'startTime',\n        name: 'Start Time'\n      }, {\n        id: 'stopTime',\n        name: 'Stop Time'\n      }, {\n        id: 'perPoint',\n        name: 'Per Point'\n      }, {\n        id: 'initialMargin',\n        name: 'Initial Margin'\n      }],\n      visible: ['change%'],\n      fixed: ['Symbol & Description']\n    };\n    this.dragStart = this.dragStart.bind(this);\n    this.dragOver = this.dragOver.bind(this);\n    this.dragEnd = this.dragEnd.bind(this);\n  }\n\n  dragStart(e) {\n    this.dragged = e.currentTarget;\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/plain', this.dragged);\n  }\n\n  dragOver(e) {\n    e.preventDefault();\n    console.log(e);\n    this.dragged.style.display = \"none\";\n    if (e.target.className === 'placeholder') return;\n    this.over = e.target;\n    e.target.parentNode.insertBefore(placeholder, e.target);\n  }\n\n  dragEnd(e) {\n    e.currentTarget.style.display = 'block'; //check if the new position is under current node\n\n    if (e.currentTarget.parentNode.isSameNode(placeholder.parentNode)) {\n      e.currentTarget.parentNode.removeChild(placeholder);\n    } else {\n      //if not under current node, copy the node information to new parent\n      //placeholder.parentNode.insertBefore(e.currentTarget,placeholder)\n      placeholder.parentNode.removeChild(placeholder);\n    }\n\n    var data = this.state.available;\n    var from = Number(this.dragged.dataset.id);\n    var to = Number(this.over.dataset.id);\n    if (from < to) to--;\n    data.splice(to, 0, data.splice(from, 1)[0]);\n    this.setState({\n      available: data\n    });\n  }\n\n  render() {\n    var visible = this.state.visible.map((item, i) => {\n      return /*#__PURE__*/React.createElement(ListGroupItem, {\n        \"data-id\": i,\n        key: i,\n        draggable: \"true\",\n        onDragStart: this.dragStart,\n        onDragEnd: this.dragEnd,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 9\n        }\n      }, item);\n    });\n    var available = this.state.available.map((item, i) => {\n      return /*#__PURE__*/React.createElement(ListGroupItem, {\n        \"data-id\": i,\n        key: i,\n        draggable: \"true\",\n        onDragStart: this.dragStart,\n        onDragEnd: this.dragEnd,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 9\n        }\n      }, item.name);\n    });\n    var fixed = this.state.fixed.map((item, i) => {\n      return /*#__PURE__*/React.createElement(ListGroupItem, {\n        \"data-id\": i,\n        key: i,\n        draggable: \"true\",\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }\n      }, item);\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, \"Configure Data Fields\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, \"Drag & drop between columns to configure visible data.\"), /*#__PURE__*/React.createElement(ListGroup, {\n      horizontal: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ListGroup, {\n      variant: \"flush\",\n      onDragOver: this.dragOver,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ListGroupItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }\n    }, available)), /*#__PURE__*/React.createElement(ListGroup, {\n      variant: \"flush\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ListGroupItem, {\n      onDragOver: this.dragOver,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }\n    }, fixed, \" \", visible))), /*#__PURE__*/React.createElement(Button, {\n      size: \"sm\",\n      variant: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }, \"Save\"), /*#__PURE__*/React.createElement(Button, {\n      size: \"sm\",\n      variant: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, \"Cancel\"));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/dingjunning/Documents/GitHub/drag-n-drop-column/src/App.js"],"names":["React","Button","ListGroup","ListGroupItem","placeholder","document","createElement","className","App","Component","constructor","props","state","available","id","name","visible","fixed","dragStart","bind","dragOver","dragEnd","e","dragged","currentTarget","dataTransfer","effectAllowed","setData","preventDefault","console","log","style","display","target","over","parentNode","insertBefore","isSameNode","removeChild","data","from","Number","dataset","to","splice","setState","render","map","item","i"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport { Button, ListGroup, ListGroupItem} from 'react-bootstrap';\n\nvar placeholder = document.createElement(\"li\");\nplaceholder.className = \"placeholder\";\n\nclass App extends React.Component{\n  constructor(props){\n    super(props);\n    this.state={\n      available:[{id:'startTime',name:'Start Time'},{id:'stopTime',name:'Stop Time'},{id:'perPoint',name:'Per Point'},{id:'initialMargin',name:'Initial Margin'}],\n      visible:['change%'],\n      fixed:['Symbol & Description']\n    }\n    this.dragStart=this.dragStart.bind(this);\n    this.dragOver=this.dragOver.bind(this);\n    this.dragEnd=this.dragEnd.bind(this);\n  }\n\n  dragStart(e) {\n    this.dragged = e.currentTarget;\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/plain', this.dragged);\n  }\n  \n  dragOver(e) {\n    e.preventDefault();\n    console.log(e);\n    this.dragged.style.display = \"none\";\n    if(e.target.className === 'placeholder') return;\n    this.over = e.target;\n    e.target.parentNode.insertBefore(placeholder, e.target);  \n  }\n\n  dragEnd(e) {\n    e.currentTarget.style.display = 'block';\n    //check if the new position is under current node\n    if(e.currentTarget.parentNode.isSameNode(placeholder.parentNode)){\n      e.currentTarget.parentNode.removeChild(placeholder);\n    }\n    else{\n      //if not under current node, copy the node information to new parent\n      //placeholder.parentNode.insertBefore(e.currentTarget,placeholder)\n      placeholder.parentNode.removeChild(placeholder);     \n    }  \n    var data = this.state.available;\n    var from = Number(this.dragged.dataset.id);\n    var to = Number(this.over.dataset.id);\n    if(from < to) to--;\n    data.splice(to, 0, data.splice(from, 1)[0]);\n    this.setState({available: data});\n  }\n\n  render(){\n    var visible=this.state.visible.map((item,i)=>{\n      return(\n        <ListGroupItem data-id={i} key={i} draggable='true' onDragStart={this.dragStart} onDragEnd={this.dragEnd}>{item}</ListGroupItem>\n      )\n    })\n    var available=this.state.available.map((item,i) =>{\n      return(\n        <ListGroupItem data-id={i} key={i} draggable='true' onDragStart={this.dragStart} onDragEnd={this.dragEnd}>{item.name}</ListGroupItem>\n      )\n    })\n    var fixed=this.state.fixed.map((item,i)=>{\n      return(\n        <ListGroupItem data-id={i} key={i} draggable='true'disabled>{item}</ListGroupItem>\n      )\n    })\n    return(\n      <div>\n        <h2>Configure Data Fields</h2>\n        <span>Drag & drop between columns to configure visible data.</span>\n        <ListGroup horizontal>       \n            <ListGroup variant=\"flush\" onDragOver={this.dragOver}>              \n              <ListGroupItem>{available}</ListGroupItem>\n            </ListGroup>\n            <ListGroup variant=\"flush\">\n              <ListGroupItem onDragOver={this.dragOver}>{fixed} {visible}</ListGroupItem>\n            </ListGroup>\n        </ListGroup>\n        <Button size=\"sm\" variant=\"primary\">Save</Button>\n        <Button size=\"sm\" variant=\"secondary\">Cancel</Button>\n    </div>      \n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}