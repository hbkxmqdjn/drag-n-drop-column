{"ast":null,"code":"import _defineProperty from\"/Users/dingjunning/Documents/GitHub/drag-n-drop-column/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/dingjunning/Documents/GitHub/drag-n-drop-column/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/dingjunning/Documents/GitHub/drag-n-drop-column/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/Users/dingjunning/Documents/GitHub/drag-n-drop-column/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/dingjunning/Documents/GitHub/drag-n-drop-column/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/dingjunning/Documents/GitHub/drag-n-drop-column/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/dingjunning/Documents/GitHub/drag-n-drop-column/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/dingjunning/Documents/GitHub/drag-n-drop-column/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{DragDropContext,Draggable,Droppable}from\"react-beautiful-dnd\";import{Button}from'react-bootstrap';import{BsList,BsLockFill}from'react-icons/bs';var available=[{id:\"start time\",name:\"Start Time\"},{id:\"stop time\",name:\"Stop Time\"},{id:\"per point\",name:\"Per Point\"},{id:\"initial margin\",name:\"Initial Margin\"}];var visible=[{id:\"change %\",name:\"Change %\"},{id:\"change\",name:\"Change\"},{id:\"last\",name:\"Last\"},{id:\"last volume\",name:\"Last Volume\"}];var fixed=[{id:\"symbol &amp; description\",name:\"Symbol & Description\"}];var columnsFromBackend={\"available\":{name:\"Available\",items:available},\"visible\":{name:\"Visible\",items:fixed.concat(visible)}};var checkDisable=function checkDisable(item){for(var i=0;i<fixed.length;i++){if(fixed[i].id===item.id){return true;}}return false;};var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.saveData=function(event){_this.baseState=_this.state;//currently only log the state to console.\nconsole.log(_this.state);};_this.resetData=function(){_this.setState(_this.baseState);};_this.onDoubleClick=function(event){var name=event.target.innerHTML;var id=name.toLowerCase();var newFixed={id:id,name:name};console.log(newFixed);var index=-1;for(var i=0;i<_this.state.fixed.length;i++){if(_this.state.fixed[i].id===newFixed.id){index=i;_this.setState(function(prev){var list=prev.fixed.splice(index,1);return{list:list};});break;}}if(index===-1){_this.setState(function(prev){var list=prev.fixed.push(newFixed);return{list:list};});}};_this.onDragEnd=function(result){if(!result.destination)return;var source=result.source,destination=result.destination;if(source.droppableId!==destination.droppableId){_this.setState(function(prev){var _objectSpread2;var sourceColumn=prev.columns[source.droppableId];var destColumn=prev.columns[destination.droppableId];var sourceItems=_toConsumableArray(sourceColumn.items);var destItems=_toConsumableArray(destColumn.items);var _sourceItems$splice=sourceItems.splice(source.index,1),_sourceItems$splice2=_slicedToArray(_sourceItems$splice,1),removed=_sourceItems$splice2[0];destItems.splice(destination.index,0,removed);return{columns:_objectSpread(_objectSpread({},prev.columns),{},(_objectSpread2={},_defineProperty(_objectSpread2,source.droppableId,_objectSpread(_objectSpread({},sourceColumn),{},{items:sourceItems})),_defineProperty(_objectSpread2,destination.droppableId,_objectSpread(_objectSpread({},destColumn),{},{items:destItems})),_objectSpread2))};});}else{_this.setState(function(prev){var column=prev.columns[source.droppableId];var copiedItems=_toConsumableArray(column.items);var _copiedItems$splice=copiedItems.splice(source.index,1),_copiedItems$splice2=_slicedToArray(_copiedItems$splice,1),removed=_copiedItems$splice2[0];copiedItems.splice(destination.index,0,removed);console.log(prev.columns);console.log(copiedItems);console.log(column);return{columns:_objectSpread(_objectSpread({},prev.columns),{},_defineProperty({},source.droppableId,_objectSpread(_objectSpread({},column),{},{items:copiedItems})))};},function(){});}};_this.state={columns:columnsFromBackend,fixed:fixed};_this.baseState=_this.state;return _this;}//save data when click on save\n_createClass(App,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{background:\"#000000\",display:\"flex\",height:\"100%\",color:\"#ffffff\",paddingTop:\"20px\",paddingLeft:\"20px\"}},/*#__PURE__*/React.createElement(\"h5\",null,\"Configure Data Fields\")),/*#__PURE__*/React.createElement(\"div\",{style:{background:\"#000000\",display:\"flex\",height:\"100%\",color:\"#9da4ab\",paddingLeft:\"20px\"}},/*#__PURE__*/React.createElement(\"span\",null,\"Drag & Drop between columns to configure visible data.\")),/*#__PURE__*/React.createElement(\"div\",{style:{background:\"#000000\",display:\"flex\",height:\"100%\",padding:\"20px\"}},/*#__PURE__*/React.createElement(DragDropContext,{style:{color:\"white\"},onDragEnd:function onDragEnd(result){return _this2.onDragEnd(result);}},Object.entries(this.state.columns).map(function(_ref){var _ref2=_slicedToArray(_ref,2),columnId=_ref2[0],column=_ref2[1];return/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",flexDirection:\"column\"},key:columnId,onDoubleClick:function onDoubleClick(event){return _this2.onDoubleClick(event);}},/*#__PURE__*/React.createElement(\"p\",{style:{color:'#9da4ab',paddingLeft:\"15px\",marginTop:\"20px\"}},column.name),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Droppable,{droppableId:columnId,key:columnId},function(provided){return/*#__PURE__*/React.createElement(\"div\",Object.assign({},provided.droppableProps,{ref:provided.innerRef,style:{background:\"#000000\",padding:3,width:300,borderStyle:column.name===\"Available\"?\"none none none none\":\"none none none dashed\",borderWidth:\"3px\"}}),column.items.map(function(item,index){return/*#__PURE__*/React.createElement(Draggable,{key:item.id,draggableId:item.id,index:index,isDragDisabled:checkDisable(item)},function(provided,snapshot){return/*#__PURE__*/React.createElement(\"div\",Object.assign({ref:provided.innerRef},provided.draggableProps,provided.dragHandleProps,{style:_objectSpread({userSelect:\"none\",padding:5,margin:\"0 0 5px 5px\",minHeight:\"20px\",backgroundColor:snapshot.isDragging?\"#252930\":\"#000000\",color:checkDisable(item)?\"#9da4ab\":\"#ffffff\"},provided.draggableProps.style)}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{padding:\"10px\",float:\"left\"}},/*#__PURE__*/React.createElement(BsLockFill,{style:{display:checkDisable(item)?\"block\":\"none\"}}),/*#__PURE__*/React.createElement(BsList,{style:{display:checkDisable(item)?\"none\":\"block\"}})),/*#__PURE__*/React.createElement(\"div\",{style:{padding:\"7px\"}},item.name)));});}),provided.placeholder);})));}))),/*#__PURE__*/React.createElement(\"div\",{style:{background:\"#000000\",height:\"1000px\",padding:\"20px\"}},/*#__PURE__*/React.createElement(Button,{style:{margin:\"10px\",width:\"90px\"},variant:\"info\",onClick:function onClick(event){return _this2.saveData(event);}},\"Save\"),/*#__PURE__*/React.createElement(Button,{style:{margin:\"10px\",width:\"90px\"},variant:\"secondary\",onClick:function onClick(event){return _this2.resetData(event);}},\"Cancel\")));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/dingjunning/Documents/GitHub/drag-n-drop-column/src/App.js"],"names":["React","DragDropContext","Draggable","Droppable","Button","BsList","BsLockFill","available","id","name","visible","fixed","columnsFromBackend","items","concat","checkDisable","item","i","length","App","props","saveData","event","baseState","state","console","log","resetData","setState","onDoubleClick","target","innerHTML","toLowerCase","newFixed","index","prev","list","splice","push","onDragEnd","result","destination","source","droppableId","sourceColumn","columns","destColumn","sourceItems","destItems","removed","column","copiedItems","background","display","height","color","paddingTop","paddingLeft","padding","Object","entries","map","columnId","flexDirection","marginTop","provided","droppableProps","innerRef","width","borderStyle","borderWidth","snapshot","draggableProps","dragHandleProps","userSelect","margin","minHeight","backgroundColor","isDragging","style","float","placeholder","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { DragDropContext, Draggable, Droppable } from \"react-beautiful-dnd\";\nimport { Button } from 'react-bootstrap';\nimport { BsList,BsLockFill } from 'react-icons/bs';\n\nconst available = [\n  { id: \"start time\", name: \"Start Time\" },\n  { id: \"stop time\", name: \"Stop Time\" },\n  { id: \"per point\", name: \"Per Point\" },\n  { id: \"initial margin\" , name: \"Initial Margin\" },\n];\n\nconst visible = [\n  { id: \"change %\", name: \"Change %\"},\n  { id: \"change\", name: \"Change\"},\n  { id: \"last\", name: \"Last\" },\n  { id: \"last volume\", name: \"Last Volume\" },\n];\n\nconst fixed = [\n  { id: \"symbol &amp; description\", name: \"Symbol & Description\"},\n];\n\nconst columnsFromBackend = {\n  \"available\": {\n    name: \"Available\",\n    items: available\n  },\n  \"visible\": {\n    name: \"Visible\",\n    items: fixed.concat(visible)\n  },\n};\n\nconst checkDisable=(item)=>{\n  for(let i=0;i<fixed.length;i++){\n    if(fixed[i].id===item.id){\n      return true;\n    }\n  }\n  return false;\n}\n\nclass App extends React.Component {\n  constructor(props){\n    super(props);\n    this.state={\n      columns: columnsFromBackend,\n      fixed: fixed,\n    }\n    this.baseState = this.state;\n  }\n\n  //save data when click on save\n  saveData=(event)=>{\n    this.baseState = this.state;\n    //currently only log the state to console.\n    console.log(this.state);\n  }\n\n  //reset all moved when click on cancel\n  resetData=()=>{\n    this.setState(this.baseState);\n  }\n\n  //Double click event\n  onDoubleClick=(event)=>{\n    const name = event.target.innerHTML;\n    const id = name.toLowerCase();\n    const newFixed = {id:id,name:name};\n    console.log(newFixed)\n    let index = -1;\n    for(let i=0;i<this.state.fixed.length;i++){\n      if(this.state.fixed[i].id===newFixed.id){\n        index = i;\n        this.setState(prev=>{\n          const list = prev.fixed.splice(index,1);\n          return{\n            list\n          }\n        });\n        break;\n      }\n    }\n    if(index===-1){\n      this.setState(prev=>{\n        const list = prev.fixed.push(newFixed);\n        return{\n          list\n        }\n      });\n    }   \n  }\n\n  //Drag event\n  onDragEnd = (result) => {\n    if (!result.destination) return;\n    const { source, destination } = result;\n    if (source.droppableId !== destination.droppableId) {\n      this.setState(prev=>{\n        let sourceColumn = prev.columns[source.droppableId];\n        let destColumn = prev.columns[destination.droppableId];\n        let sourceItems = [...sourceColumn.items];\n        let destItems = [...destColumn.items];\n        let [removed] = sourceItems.splice(source.index, 1);\n        destItems.splice(destination.index, 0, removed);\n        return{\n          columns:{\n            ...prev.columns,\n            [source.droppableId]: {\n              ...sourceColumn,\n              items: sourceItems\n            },\n            [destination.droppableId]: {\n              ...destColumn,\n              items: destItems\n            }\n          }\n        }\n      });\n    } else {\n      this.setState(prev=>{   \n        let column = prev.columns[source.droppableId];\n        let copiedItems = [...column.items];\n        let [removed] = copiedItems.splice(source.index, 1);\n        copiedItems.splice(destination.index, 0, removed);\n        console.log(prev.columns)\n        console.log(copiedItems);\n        console.log(column);\n        return{\n          columns:{\n            ...prev.columns,\n            [source.droppableId]: {\n              ...column,\n              items: copiedItems\n            }\n          }\n        }\n      },()=>{\n        \n      });\n    }\n  };\n\n  render(){\n    return (\n      <div>\n        <div style={{ background:\"#000000\", display:\"flex\", height: \"100%\", color:\"#ffffff\", paddingTop:\"20px\", paddingLeft:\"20px\"}}>\n          <h5>Configure Data Fields</h5>\n        </div>\n        <div style={{ background:\"#000000\", display:\"flex\", height: \"100%\", color:\"#9da4ab\",paddingLeft:\"20px\"}}>\n          <span>Drag & Drop between columns to configure visible data.</span>\n        </div>\n        <div style={{ background:\"#000000\",display: \"flex\", height: \"100%\", padding:\"20px\" }}>\n          <DragDropContext style={{color:\"white\"}} onDragEnd={result => this.onDragEnd(result)}>\n            {Object.entries(this.state.columns).map(([columnId, column]) => {\n              return (   \n                <div\n                  style={{\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    \n                  }}\n                  key={columnId}\n                  onDoubleClick={event=>this.onDoubleClick(event)}\n                >\n                  <p style={{color:'#9da4ab',paddingLeft:\"15px\",marginTop:\"20px\"}}>{column.name}</p>\n                  <div>\n                    <Droppable droppableId={columnId} key={columnId} >\n                      {(provided) => {\n                        return (\n                          <div\n                            {...provided.droppableProps}\n                            ref={provided.innerRef}\n                            style={{\n                              background: \"#000000\",\n                              padding: 3,\n                              width: 300,\n                              borderStyle: column.name===\"Available\"\n                                ? \"none none none none\"\n                                : \"none none none dashed\",\n                              borderWidth:\"3px\",\n                            }}\n                          >\n                            {column.items.map((item, index) => {\n                              return (\n                                <Draggable\n                                  key={item.id}\n                                  draggableId={item.id}\n                                  index={index}\n                                  isDragDisabled={checkDisable(item)}\n                                >\n                                  {(provided, snapshot) => {\n                                    return (\n                                      <div\n                                        ref={provided.innerRef}\n                                        {...provided.draggableProps}\n                                        {...provided.dragHandleProps}\n                                        style={{                                     \n                                          userSelect: \"none\",\n                                          padding: 5,\n                                          margin: \"0 0 5px 5px\",\n                                          minHeight: \"20px\",\n                                          backgroundColor: snapshot.isDragging\n                                            ? \"#252930\"\n                                            : \"#000000\",\n                                          color: checkDisable(item)\n                                            ? \"#9da4ab\"\n                                            : \"#ffffff\",\n                                          ...provided.draggableProps.style\n                                        }}\n                                      >\n                                        <div>\n                                          <div style={{padding:\"10px\",float:\"left\"}}>\n                                            <BsLockFill style={{\n                                              display: checkDisable(item)\n                                              ? \"block\"\n                                              : \"none\",\n                                              }}\n                                            />\n                                            <BsList style={{\n                                              display: checkDisable(item)\n                                              ? \"none\"\n                                              : \"block\",\n                                              }}\n                                            />\n                                          </div>\n                                          <div style={{padding:\"7px\"}}>\n                                            {item.name}\n                                          </div>\n                                        </div>\n                                      </div>\n                                    );\n                                  }}\n                                </Draggable>\n                              );\n                            })}\n                            {provided.placeholder}\n                          </div>\n                        );\n                      }}\n                    </Droppable>\n                  </div>\n                </div>\n              );\n            })}\n          </DragDropContext>\n        </div>\n        <div style={{background:\"#000000\" , height:\"1000px\", padding:\"20px\"}}>\n          <Button style={{margin:\"10px\", width:\"90px\"}} variant=\"info\" onClick={event=>this.saveData(event)}>Save</Button>\n          <Button style={{margin:\"10px\", width:\"90px\"}} variant=\"secondary\" onClick={event=>this.resetData(event)}>Cancel</Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}